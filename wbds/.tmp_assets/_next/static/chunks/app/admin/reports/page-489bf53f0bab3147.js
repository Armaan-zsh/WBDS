(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[375],{8676:function(e,s,t){Promise.resolve().then(t.bind(t,5685))},5685:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var a=t(2347),i=t(3812),r=t(8945),o=t(6445);function c(){let[e,s]=(0,r.useState)(""),[t,c]=(0,r.useState)(!1),[n,d]=(0,r.useState)([]),[l,b]=(0,r.useState)(!1),[x,p]=(0,r.useState)("letters"),f="youarenotdoneyetaverylongwaytogo@spacecadet".trim(),m=(0,r.useCallback)(async()=>{let e=(0,o.S)();if(!e){console.error("Supabase client not initialized."),b(!1);return}b(!0);let s="letters"===x?"letter_reports":"feedback",t=e.from(s).select("*").order("created_at",{ascending:!1});"letters"===x&&(t=e.from("letter_reports").select("\n                    *,\n                    letters (\n                        content,\n                        ip_address\n                    )\n                ").order("created_at",{ascending:!1}));let{data:a,error:i}=await t;i?console.error("Error fetching ".concat(x," reports:"),i):d(a||[]),b(!1)},[x]);(0,r.useEffect)(()=>{t&&m()},[t,m]);let u=async(e,s)=>{let t="Are you sure you want to ".concat(e.replace("_"," "),"?");if(window.confirm(t))try{var a;let t=await fetch("/api/admin/actions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({action:e,report_id:s.id,letter_id:s.letter_id,target_ip:(null===(a=s.letters)||void 0===a?void 0:a.ip_address)||s.reporter_ip,notes:"Action taken via admin dashboard: ".concat(e)})}),i=await t.json();i.success?m():alert("Action failed: ".concat(i.error))}catch(e){alert("Error: ".concat(e.message))}};return t?(0,a.jsxs)("div",{className:"jsx-7b34e9109e2c4770 admin-dashboard",children:[(0,a.jsxs)("header",{className:"jsx-7b34e9109e2c4770",children:[(0,a.jsxs)("div",{className:"jsx-7b34e9109e2c4770 brand",children:[(0,a.jsx)("h1",{className:"jsx-7b34e9109e2c4770",children:"WBDS Control Center"}),(0,a.jsxs)("div",{className:"jsx-7b34e9109e2c4770 tabs",children:[(0,a.jsx)("button",{onClick:()=>p("letters"),className:"jsx-7b34e9109e2c4770 "+(("letters"===x?"active":"")||""),children:"Letter Reports"}),(0,a.jsx)("button",{onClick:()=>p("feedback"),className:"jsx-7b34e9109e2c4770 "+(("feedback"===x?"active":"")||""),children:"Feedback"})]})]}),(0,a.jsx)("button",{onClick:m,className:"jsx-7b34e9109e2c4770 refresh-btn",children:"Refresh Feed"})]}),l?(0,a.jsx)("div",{className:"jsx-7b34e9109e2c4770 loading",children:"Scanning void for transmissions..."}):(0,a.jsx)("div",{className:"jsx-7b34e9109e2c4770 content-area",children:"letters"===x?(0,a.jsx)("div",{className:"jsx-7b34e9109e2c4770 reports-grid",children:0===n.length?(0,a.jsx)("div",{className:"jsx-7b34e9109e2c4770 empty",children:"The void is silent. No reports found."}):n.map(e=>{var s,t;return(0,a.jsxs)("div",{className:"jsx-7b34e9109e2c4770 "+"report-card ".concat(e.status),children:[(0,a.jsxs)("div",{className:"jsx-7b34e9109e2c4770 card-header",children:[(0,a.jsx)("span",{className:"jsx-7b34e9109e2c4770 "+"status-badge ".concat(e.status),children:e.status}),(0,a.jsx)("span",{className:"jsx-7b34e9109e2c4770 reason-badge",children:e.reason}),e.toxicity_score&&(0,a.jsxs)("span",{className:"jsx-7b34e9109e2c4770 "+"toxicity-badge ".concat(e.toxicity_score>.7?"high":"low"),children:["Tox: ",(100*e.toxicity_score).toFixed(0),"%"]}),(0,a.jsx)("span",{className:"jsx-7b34e9109e2c4770 timestamp",children:new Date(e.created_at).toLocaleString()})]}),(0,a.jsx)("div",{className:"jsx-7b34e9109e2c4770 letter-preview",children:(0,a.jsx)("p",{className:"jsx-7b34e9109e2c4770",children:(null===(s=e.letters)||void 0===s?void 0:s.content)||"Letter content missing or deleted"})}),e.description&&(0,a.jsxs)("div",{className:"jsx-7b34e9109e2c4770 user-note",children:[(0,a.jsx)("strong",{className:"jsx-7b34e9109e2c4770",children:"Reporter Note:"})," ",e.description]}),(0,a.jsxs)("div",{className:"jsx-7b34e9109e2c4770 card-footer",children:[(0,a.jsx)("div",{className:"jsx-7b34e9109e2c4770 meta-info",children:(0,a.jsxs)("span",{className:"jsx-7b34e9109e2c4770",children:["IP: ",(null===(t=e.letters)||void 0===t?void 0:t.ip_address)||e.reporter_ip]})}),(0,a.jsxs)("div",{className:"jsx-7b34e9109e2c4770 actions",children:["pending"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>u("dismiss",e),className:"jsx-7b34e9109e2c4770 btn-dismiss",children:"Dismiss"}),(0,a.jsx)("button",{onClick:()=>u("ban_ip",e),className:"jsx-7b34e9109e2c4770 btn-ban",children:"Ban IP"}),(0,a.jsx)("button",{onClick:()=>u("delete_letter",e),className:"jsx-7b34e9109e2c4770 btn-delete",children:"Delete Letter"})]}),"pending"!==e.status&&(0,a.jsxs)("span",{className:"jsx-7b34e9109e2c4770 action-taken",children:["Resolved: ",e.action_taken]})]})]})]},e.id)})}):(0,a.jsx)("div",{className:"jsx-7b34e9109e2c4770 feedback-table",children:(0,a.jsxs)("table",{className:"jsx-7b34e9109e2c4770",children:[(0,a.jsx)("thead",{className:"jsx-7b34e9109e2c4770",children:(0,a.jsxs)("tr",{className:"jsx-7b34e9109e2c4770",children:[(0,a.jsx)("th",{className:"jsx-7b34e9109e2c4770",children:"Date"}),(0,a.jsx)("th",{className:"jsx-7b34e9109e2c4770",children:"Type"}),(0,a.jsx)("th",{className:"jsx-7b34e9109e2c4770",children:"Description"}),(0,a.jsx)("th",{className:"jsx-7b34e9109e2c4770",children:"Details"})]})}),(0,a.jsx)("tbody",{className:"jsx-7b34e9109e2c4770",children:n.map(e=>(0,a.jsxs)("tr",{className:"jsx-7b34e9109e2c4770",children:[(0,a.jsx)("td",{className:"jsx-7b34e9109e2c4770",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)("td",{className:"jsx-7b34e9109e2c4770",children:(0,a.jsx)("span",{className:"jsx-7b34e9109e2c4770 "+"tag ".concat(e.type.toLowerCase()),children:e.type})}),(0,a.jsx)("td",{className:"jsx-7b34e9109e2c4770",children:e.description}),(0,a.jsx)("td",{className:"jsx-7b34e9109e2c4770",children:e.email||"Anonymous"})]},e.id))})]})})}),(0,a.jsx)(i,{id:"7b34e9109e2c4770",children:'.admin-dashboard.jsx-7b34e9109e2c4770{min-height:100vh;background:#0a0a0b;color:#e2e2e7;font-family:"Inter",-apple-system,sans-serif;padding:40px}header.jsx-7b34e9109e2c4770{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:end;-webkit-align-items:flex-end;-moz-box-align:end;-ms-flex-align:end;align-items:flex-end;margin-bottom:40px;border-bottom:1px solid#1c1c1e;padding-bottom:24px}.brand.jsx-7b34e9109e2c4770 h1.jsx-7b34e9109e2c4770{margin:0 0 16px 0;font-weight:300;font-size:24px}.tabs.jsx-7b34e9109e2c4770{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px}.tabs.jsx-7b34e9109e2c4770 button.jsx-7b34e9109e2c4770{background:transparent;color:#8e8e93;border:1px solid#2c2c2e;padding:8px 16px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;cursor:pointer;font-size:14px;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.tabs.jsx-7b34e9109e2c4770 button.active.jsx-7b34e9109e2c4770{background:#1c1c1e;color:#fff;border-color:#444}.refresh-btn.jsx-7b34e9109e2c4770{background:#2c2c2e;color:#fff;border:none;padding:10px 20px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;cursor:pointer;font-weight:500}.reports-grid.jsx-7b34e9109e2c4770{display:grid;grid-template-columns:repeat(auto-fill,minmax(400px,1fr));gap:24px}.report-card.jsx-7b34e9109e2c4770{background:#1c1c1e;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;border:1px solid#2c2c2e;padding:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:16px}.card-header.jsx-7b34e9109e2c4770{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:10px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.status-badge.jsx-7b34e9109e2c4770{padding:2px 8px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:10px;font-weight:800;text-transform:uppercase}.status-badge.pending.jsx-7b34e9109e2c4770{background:#ff9f0a;color:#000}.status-badge.dismissed.jsx-7b34e9109e2c4770{background:#333;color:#8e8e93}.status-badge.resolved.jsx-7b34e9109e2c4770{background:#30d158;color:#000}.reason-badge.jsx-7b34e9109e2c4770{background:#2c2c2e;padding:2px 8px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:10px;font-weight:600;color:#d1d1d6}.toxicity-badge.jsx-7b34e9109e2c4770{padding:2px 8px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:10px;font-weight:800}.toxicity-badge.high.jsx-7b34e9109e2c4770{background:rgba(255,69,58,.2);color:#ff453a}.toxicity-badge.low.jsx-7b34e9109e2c4770{background:rgba(48,209,88,.2);color:#30d158}.timestamp.jsx-7b34e9109e2c4770{font-size:11px;color:#636366;margin-left:auto}.letter-preview.jsx-7b34e9109e2c4770{background:#000;padding:16px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;font-family:serif;line-height:1.5;font-size:14px;max-height:150px;overflow-y:auto;border:1px solid#111}.user-note.jsx-7b34e9109e2c4770{font-size:13px;color:#a1a1a6;background:#2c2c2e;padding:10px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.card-footer.jsx-7b34e9109e2c4770{margin-top:auto;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding-top:16px;border-top:1px solid#2c2c2e}.meta-info.jsx-7b34e9109e2c4770{font-family:monospace;font-size:11px;color:#636366}.actions.jsx-7b34e9109e2c4770{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px}.actions.jsx-7b34e9109e2c4770 button.jsx-7b34e9109e2c4770{padding:6px 12px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;border:none;font-size:12px;font-weight:600;cursor:pointer;-webkit-transition:opacity.2s;-moz-transition:opacity.2s;-o-transition:opacity.2s;transition:opacity.2s}.actions.jsx-7b34e9109e2c4770 button.jsx-7b34e9109e2c4770:hover{opacity:.8}.btn-dismiss.jsx-7b34e9109e2c4770{background:#333;color:#fff}.btn-ban.jsx-7b34e9109e2c4770{background:#ff9f0a;color:#000}.btn-delete.jsx-7b34e9109e2c4770{background:#ff453a;color:#fff}.action-taken.jsx-7b34e9109e2c4770{font-size:12px;color:#8e8e93;font-style:italic}.feedback-table.jsx-7b34e9109e2c4770 table.jsx-7b34e9109e2c4770{width:100%;border-collapse:collapse}.feedback-table.jsx-7b34e9109e2c4770 th.jsx-7b34e9109e2c4770{text-align:left;padding:12px;border-bottom:2px solid#2c2c2e;font-size:12px;color:#8e8e93}.feedback-table.jsx-7b34e9109e2c4770 td.jsx-7b34e9109e2c4770{padding:12px;border-bottom:1px solid#1c1c1e;font-size:14px}.tag.jsx-7b34e9109e2c4770{padding:2px 6px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:10px;font-weight:800}.tag.bug.jsx-7b34e9109e2c4770{background:#ff453a;color:#fff}'})]}):(0,a.jsxs)("div",{className:"jsx-58b529ef952d2ba9 admin-lock",children:[(0,a.jsxs)("form",{onSubmit:s=>{s.preventDefault(),e.trim()===f?c(!0):alert("Access Denied")},className:"jsx-58b529ef952d2ba9 lock-form",children:[(0,a.jsx)("h1",{className:"jsx-58b529ef952d2ba9",children:"Restricted Area"}),(0,a.jsxs)("div",{className:"jsx-58b529ef952d2ba9 input-group",children:[(0,a.jsx)("input",{type:"password",value:e,onChange:e=>s(e.target.value),placeholder:"Enter Admin Secret",autoFocus:!0,className:"jsx-58b529ef952d2ba9"}),(0,a.jsx)("button",{type:"submit",className:"jsx-58b529ef952d2ba9",children:"Unlock"})]}),(0,a.jsx)("div",{className:"jsx-58b529ef952d2ba9 hint-container",children:(0,a.jsx)("span",{className:"jsx-58b529ef952d2ba9 hint",children:"âœ… Secure Environment Detected"})})]}),(0,a.jsx)(i,{id:"58b529ef952d2ba9",children:'.admin-lock.jsx-58b529ef952d2ba9{height:100vh;width:100vw;background:#050505;color:#fff;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-family:"Inter",-apple-system,sans-serif}.lock-form.jsx-58b529ef952d2ba9{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:24px;text-align:center;background:rgba(255,255,255,.02);padding:40px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;border:1px solid rgba(255,255,255,.05)}h1.jsx-58b529ef952d2ba9{font-weight:300;letter-spacing:2px;margin-bottom:20px}.input-group.jsx-58b529ef952d2ba9{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:10px}input.jsx-58b529ef952d2ba9{padding:12px 20px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;border:1px solid#333;background:#111;color:#fff;outline:none;-webkit-transition:border-color.2s;-moz-transition:border-color.2s;-o-transition:border-color.2s;transition:border-color.2s}input.jsx-58b529ef952d2ba9:focus{border-color:#555}button.jsx-58b529ef952d2ba9{padding:12px 24px;background:#fff;color:#000;border:none;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;cursor:pointer;font-weight:600}.hint-container.jsx-58b529ef952d2ba9{margin-top:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.hint.jsx-58b529ef952d2ba9{font-size:11px;color:#444;text-transform:uppercase;letter-spacing:1px}'})]})}},6445:function(e,s,t){"use strict";t.d(s,{S:function(){return r}});var a=t(9412);let i=null,r=()=>{if(i)return i;let e="https://tsytbdnbevscxhrcccvq.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRzeXRiZG5iZXZzY3hocmNjY3ZxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgyODQ2MTgsImV4cCI6MjA4Mzg2MDYxOH0.LcVorouHvEugFR4t_bsYzpFNRNzovuRGZBAAd59-qpc";if(!e||!s)return console.warn("Supabase: Environment variables missing during lazy init."),null;try{return i=(0,a.eI)(e,s)}catch(e){return console.error("Supabase: Failed to create client",e),null}}}},function(e){e.O(0,[812,412,193,268,744],function(){return e(e.s=8676)}),_N_E=e.O()}]);